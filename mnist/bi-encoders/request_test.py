import requests
from torchvision.datasets import MNIST
import torchvision
from PIL import Image
from torchvision.utils import save_image

# mnist_data_train = MNIST('../data/', train=True, transform=torchvision.transforms.Compose([
#                                torchvision.transforms.ToTensor(),
#                                torchvision.transforms.Normalize(
#                                  (0.1307,), (0.3081,))]))

# query = mnist_data_train[25][0]

# save_image(query, 'test_query.jpg')



# resp = requests.post("http://127.0.0.1:5000/predict", 
#                      files={"file": open('test_query.jpg', 'rb')})

# print(resp.json())

import base64
img_data = 'data:image/png;base64,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'


print(img_data.startswith('data:image/png;base64,'))
img_data = img_data.replace('data:image/png;base64,', '')
print(img_data.startswith('data:image/png;base64,'))
print(img_data[:5])
exit()

import io
import re 
def decode_base64(data, altchars=b'+/'):
    """Decode base64, padding being optional.

    :param data: Base64 data as an ASCII byte string
    :returns: The decoded byte string.

    """
    data = re.sub(rb'[^a-zA-Z0-9%s]+' % altchars, b'', data)  # normalize
    missing_padding = len(data) % 4
    if missing_padding:
        data += b'='* (4 - missing_padding)
    return base64.b64decode(data, altchars)
img_data = img_data + '=' * (4 - len(img_data) % 4) if len(img_data) % 4 != 0 else img_data
imgdata = base64.b64decode(img_data)
with open('test_query1.png', 'wb') as f:
    f.write(imgdata)

# img = Image.open(io.BytesIO(base64.b64decode(img_data)))
# save_image(img, 'test_query1.jpg')

